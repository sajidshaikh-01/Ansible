---
- name: Launch EC2 Instance
  amazon.aws.ec2_instance:
    name: "{{ aws_tag_name }}"
    key_name: "{{ aws_keypair }}"
    instance_type: "{{ aws_instance_type }}"
    image_id: "{{ aws_ami_id }}"
    security_group: "{{ aws_security_group }}"
    region: "{{ aws_region }}"
    volumes:
      - device_name: /dev/sda1
        ebs:
          volume_size: "{{ aws_volume_size }}"
    aws_access_key: "{{ aws_access_key }}"
    aws_secret_key: "{{ aws_secret_key }}"
    wait: yes
  register: ec2_output

- name: Show instance public IP
  debug:
    msg: "Instance created with Public IP: {{ ec2_output.instances[0].public_ip_address }}"
